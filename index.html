<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#16213e">
    <meta name="description" content="–û—Ñ–ª–∞–π–Ω –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä PWA">

    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ú—É–∑—ã–∫–∞">
    <link rel="apple-touch-icon" href="./icon.svg">

    <title>–û—Ñ–ª–∞–π–Ω –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ü–ª–µ–µ—Ä</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ –ú–æ—è –ú—É–∑—ã–∫–∞</h1>
            <div class="status">
                <span id="statusIndicator" class="online">‚óè</span>
                <span id="statusText">–ì–æ—Ç–æ–≤</span>
            </div>
            <button id="helpBtn" class="help-btn" title="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Help">‚ùì</button>
        </header>

        <div class="add-tracks-section">
            <input type="file" id="fileInput" accept="audio/*,video/mp4,video/x-m4v,.mp3,.wav,.ogg,.m4a,.flac,.mp4,.m4v,.aac,.wma,.webm" multiple hidden>
            <input type="file" id="importFileInput" accept=".json" hidden>
            <button id="addTracksBtn" class="btn-primary" aria-label="Add audio tracks">
                <span>üìÅ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏</span>
            </button>
            <button id="clearAllBtn" class="btn-danger" aria-label="Clear all tracks">
                <span>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</span>
            </button>
            <p style="font-size: 0.85em; color: rgba(255,255,255,0.6); margin-top: 8px; text-align: center;">
                –ò–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã –≤ –æ–∫–Ω–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω!)
            </p>
        </div>

        <!-- Search and Controls -->
        <div class="search-controls">
            <input type="search" id="searchInput" class="search-input" placeholder="üîç –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤... / Search tracks..." aria-label="Search tracks">
            <div class="control-buttons">
                <button id="shuffleBtn" class="control-icon-btn" title="Shuffle (S)" aria-label="Toggle shuffle mode">üîÄ</button>
                <button id="repeatBtn" class="control-icon-btn" title="Repeat (R)" aria-label="Cycle repeat mode">üîÅ</button>
                <button id="speedBtn" class="control-icon-btn" title="Playback speed" aria-label="Change playback speed">1x</button>
                <button id="sleepTimerBtn" class="control-icon-btn" title="Sleep timer" aria-label="Set sleep timer">‚è∞</button>
                <button id="exportBtn" class="control-icon-btn" title="Export playlist" aria-label="Export playlist to JSON">üíæ</button>
                <button id="importBtn" class="control-icon-btn" title="Import playlist" aria-label="Import playlist from JSON">üì•</button>
            </div>
        </div>

        <div class="now-playing">
            <div class="album-art">
                <div class="vinyl-disc" id="vinylDisc">
                    <div class="vinyl-center"></div>
                </div>
            </div>
            <div class="track-info">
                <h2 id="currentTrackTitle">–¢—Ä–µ–∫ –Ω–µ –∏–≥—Ä–∞–µ—Ç</h2>
                <p id="currentTrackArtist">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
            </div>
        </div>

        <div class="player-controls">
            <div class="progress-container">
                <span id="currentTime" aria-label="Current time">0:00</span>
                <input type="range" id="progressBar" class="progress-bar" min="0" max="100" value="0" aria-label="Seek progress bar" role="slider">
                <span id="duration" aria-label="Duration">0:00</span>
            </div>

            <div class="controls">
                <button id="prevBtn" class="control-btn" aria-label="Previous track (Left arrow)" title="Previous (‚Üê)">‚èÆÔ∏è</button>
                <button id="playPauseBtn" class="control-btn play-btn" aria-label="Play or Pause (Spacebar)" title="Play/Pause (Space)">‚ñ∂Ô∏è</button>
                <button id="nextBtn" class="control-btn" aria-label="Next track (Right arrow)" title="Next (‚Üí)">‚è≠Ô∏è</button>
            </div>

            <div class="volume-control">
                <span aria-hidden="true">üîä</span>
                <input type="range" id="volumeBar" class="volume-bar" min="0" max="100" value="70" aria-label="Volume control" role="slider">
            </div>
        </div>

        <div class="playlist">
            <h3>–ü–ª–µ–π–ª–∏—Å—Ç (<span id="trackCount">0</span> <span id="tracksLabel">—Ç—Ä–µ–∫–æ–≤</span>)</h3>
            <div id="trackList" class="track-list">
                <div class="empty-state">
                    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ç—Ä–µ–∫–æ–≤</p>
                    <p class="hint">–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Video element supports both audio and video formats (including MP4) -->
    <!-- Hidden: video is invisible, only audio plays -->
    <video id="audioPlayer" preload="metadata" playsinline style="display: none;"></video>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / User Guide</h2>

            <div class="help-section">
                <h3>üéµ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –º—É–∑—ã–∫—É / How to Add Music</h3>
                <p><strong>–°–ø–æ—Å–æ–± 1:</strong> –ù–∞–∂–º–∏—Ç–µ "üìÅ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏" ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã</p>
                <p><strong>Method 1:</strong> Click "üìÅ Add Tracks" ‚Üí Select files</p>
                <p><strong>–°–ø–æ—Å–æ–± 2:</strong> –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ MP3/MP4 —Ñ–∞–π–ª—ã –≤ –æ–∫–Ω–æ</p>
                <p><strong>Method 2:</strong> Drag & drop MP3/MP4 files into window</p>
            </div>

            <div class="help-section">
                <h3>‚ñ∂Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ / Controls</h3>
                <p>‚èÆÔ∏è –ü—Ä–µ–¥—ã–¥—É—â–∞—è / Previous | ‚ñ∂Ô∏è –ò–≥—Ä–∞—Ç—å / Play | ‚è∏Ô∏è –ü–∞—É–∑–∞ / Pause | ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∞—è / Next</p>
                <p>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å / Volume | –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä / Progress bar –¥–ª—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏ / for seeking</p>
            </div>

            <div class="help-section">
                <h3>üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ / Storage</h3>
                <p>üì± <strong>–¢–µ–ª–µ—Ñ–æ–Ω / Phone:</strong> –¥–æ / up to 10 GB</p>
                <p>üíª <strong>–ö–æ–º–ø—å—é—Ç–µ—Ä / Desktop:</strong> –¥–æ / up to 500 GB!</p>
                <p>‚úÖ –ú—É–∑—ã–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è <strong>–ª–æ–∫–∞–ª—å–Ω–æ</strong> / Music stored <strong>locally</strong></p>
                <p>‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç <strong>–æ—Ñ–ª–∞–π–Ω</strong> / Works <strong>offline</strong></p>
            </div>

            <div class="help-section">
                <h3>üì∂ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º / Offline Mode</h3>
                <p>1. –î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏ <strong>—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º</strong> (–æ–¥–∏–Ω —Ä–∞–∑)</p>
                <p>1. Add tracks <strong>with internet</strong> (once)</p>
                <p>2. –°–ª—É—à–∞–π—Ç–µ <strong>–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</strong> –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ!</p>
                <p>2. Listen <strong>without internet</strong> anytime!</p>
            </div>

            <div class="help-section">
                <h3>üéº –§–æ—Ä–º–∞—Ç—ã / Formats</h3>
                <p>‚úÖ MP3, WAV, OGG, FLAC, M4A, AAC</p>
                <p>‚úÖ MP4, M4V (–≤–∏–¥–µ–æ - —Ç–æ–ª—å–∫–æ –∑–≤—É–∫ / video - audio only)</p>
            </div>

            <div class="help-section">
                <h3>‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ / Keyboard Shortcuts</h3>
                <p><strong>–ü—Ä–æ–±–µ–ª / Space</strong> - –ò–≥—Ä–∞—Ç—å/–ü–∞—É–∑–∞ / Play/Pause</p>
                <p><strong>‚Üí –°—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ / Right Arrow</strong> - –°–ª–µ–¥. —Ç—Ä–µ–∫ / Next track</p>
                <p><strong>‚Üê –°—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ / Left Arrow</strong> - –ü—Ä–µ–¥. —Ç—Ä–µ–∫ / Previous track</p>
                <p><strong>Shift + ‚Üí</strong> - –í–ø–µ—Ä—ë–¥ 10—Å / Skip forward 10s</p>
                <p><strong>Shift + ‚Üê</strong> - –ù–∞–∑–∞–¥ 10—Å / Skip backward 10s</p>
                <p><strong>‚Üë / ‚Üì</strong> - –ì—Ä–æ–º–∫–æ—Å—Ç—å / Volume up/down</p>
                <p><strong>M</strong> - –í—ã–∫–ª. –∑–≤—É–∫ / Mute</p>
                <p><strong>S</strong> - –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ / Shuffle</p>
                <p><strong>R</strong> - –ü–æ–≤—Ç–æ—Ä / Repeat</p>
            </div>

            <div class="help-section">
                <h3>‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ / New Features</h3>
                <p>üîÄ <strong>–ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ</strong> - –°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ / Random playback</p>
                <p>üîÅ <strong>–ü–æ–≤—Ç–æ—Ä</strong> - –û–¥–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞ –∏–ª–∏ –≤—Å–µ—Ö / Repeat one or all</p>
                <p>üîç <strong>–ü–æ–∏—Å–∫</strong> - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é / Quick search</p>
                <p>üíæ <strong>–≠–∫—Å–ø–æ—Ä—Ç</strong> - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç / Save playlist</p>
                <p>‚è∞ <strong>–¢–∞–π–º–µ—Ä —Å–Ω–∞</strong> - –ê–≤—Ç–æ—Å—Ç–æ–ø / Auto stop</p>
                <p>‚ö° <strong>–°–∫–æ—Ä–æ—Å—Ç—å</strong> - 0.5x –¥–æ 2x / 0.5x to 2x speed</p>
            </div>

            <div class="help-section">
                <h3>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ / Install as App</h3>
                <p><strong>iPhone:</strong> Safari ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí –ù–∞ —ç–∫—Ä–∞–Ω "–î–æ–º–æ–π"</p>
                <p><strong>iPhone:</strong> Safari ‚Üí Share ‚Üí Add to Home Screen</p>
                <p><strong>Android:</strong> Chrome ‚Üí –ú–µ–Ω—é (‚ãÆ) ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
                <p><strong>Android:</strong> Chrome ‚Üí Menu (‚ãÆ) ‚Üí Install app</p>
                <p><strong>Desktop:</strong> Chrome/Edge ‚Üí –ó–Ω–∞—á–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (‚äï)</p>
                <p><strong>Desktop:</strong> Chrome/Edge ‚Üí Install icon (‚äï)</p>
            </div>

            <div class="help-section">
                <h3>üìö –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Full Guide</h3>
                <p>üá∑üá∫ <a href="https://github.com/RAZEX0LOL/music-player-pwa/blob/master/INSTRUKCIYA.md" target="_blank">–†—É—Å—Å–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a></p>
                <p>üá¨üáß <a href="https://github.com/RAZEX0LOL/music-player-pwa/blob/master/USER-GUIDE.md" target="_blank">English User Guide</a></p>
            </div>

            <div class="help-section" style="text-align: center; padding-top: 10px;">
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9em;">
                    üîí 100% –ø—Ä–∏–≤–∞—Ç–Ω–æ / 100% private<br>
                    –ù–µ—Ç —Å–ª–µ–∂–∫–∏ / No tracking | –ù–µ—Ç —Ä–µ–∫–ª–∞–º—ã / No ads
                </p>
            </div>
        </div>
    </div>

    <script src="./app.js"></script>
</body>
</html>
