<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#16213e">
    <meta name="description" content="–û—Ñ–ª–∞–π–Ω –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä PWA">

    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ú—É–∑—ã–∫–∞">
    <link rel="apple-touch-icon" href="./icon.svg">

    <title>–û—Ñ–ª–∞–π–Ω –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ü–ª–µ–µ—Ä</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ –ú–æ—è –ú—É–∑—ã–∫–∞</h1>
            <div class="status">
                <span id="statusIndicator" class="online">‚óè</span>
                <span id="statusText">–ì–æ—Ç–æ–≤</span>
            </div>
            <button id="helpBtn" class="help-btn" title="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Help">‚ùì</button>
        </header>

        <div class="add-songs-section">
            <input type="file" id="fileInput" accept="audio/*,video/mp4,video/x-m4v,.mp3,.wav,.ogg,.m4a,.flac,.mp4,.m4v,.aac,.wma,.webm" multiple hidden>
            <button id="addTracksBtn" class="btn-primary">
                <span>üìÅ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏</span>
            </button>
            <button id="addYoutubeBtn" class="btn-secondary" title="–°–∫–∞—á–∞—Ç—å —Å YouTube / Download from YouTube">
                <span id="youtubeBtnText">üîó YouTube</span>
            </button>
            <button id="clearAllBtn" class="btn-danger">
                <span>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</span>
            </button>
            <div class="offline-features-note">
                <p style="font-size: 0.85em; color: rgba(255,255,255,0.6); margin-top: 8px; text-align: center;">
                    ‚úÖ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ - —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω!<br>
                    ‚úÖ Drag & drop files - works offline!
                </p>
                <p style="font-size: 0.75em; color: rgba(255,255,255,0.4); margin-top: 4px; text-align: center;">
                    ‚ö†Ô∏è YouTube –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç / YouTube download requires internet
                </p>
            </div>
        </div>

        <div class="now-playing">
            <div class="album-art">
                <video id="videoDisplay" class="video-display" playsinline style="display: none;"></video>
                <div class="vinyl-disc" id="vinylDisc">
                    <div class="vinyl-center"></div>
                </div>
            </div>
            <div class="song-info">
                <h2 id="currentSongTitle">–¢—Ä–µ–∫ –Ω–µ –∏–≥—Ä–∞–µ—Ç</h2>
                <p id="currentSongArtist">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
            </div>
        </div>

        <div class="player-controls">
            <div class="progress-container">
                <span id="currentTime">0:00</span>
                <input type="range" id="progressBar" class="progress-bar" min="0" max="100" value="0">
                <span id="duration">0:00</span>
            </div>

            <div class="controls">
                <button id="prevBtn" class="control-btn">‚èÆÔ∏è</button>
                <button id="playPauseBtn" class="control-btn play-btn">‚ñ∂Ô∏è</button>
                <button id="nextBtn" class="control-btn">‚è≠Ô∏è</button>
            </div>

            <div class="volume-control">
                <span>üîä</span>
                <input type="range" id="volumeBar" class="volume-bar" min="0" max="100" value="70">
            </div>
        </div>

        <div class="playlist">
            <h3>–ü–ª–µ–π–ª–∏—Å—Ç (<span id="songCount">0</span> <span id="songsLabel">—Ç—Ä–µ–∫–æ–≤</span>)</h3>
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="üîç –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤...">
            </div>
            <div id="songList" class="song-list">
                <div class="empty-state">
                    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ç—Ä–µ–∫–æ–≤</p>
                    <p class="hint">–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Video element supports both audio and video formats (including MP4) -->
    <!-- Hidden: video is invisible, only audio plays -->
    <video id="audioPlayer" preload="metadata" playsinline style="display: none;"></video>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / User Guide</h2>

            <div class="help-section">
                <h3>üéµ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –º—É–∑—ã–∫—É / How to Add Music</h3>
                <p><strong>–°–ø–æ—Å–æ–± 1 (–û—Ñ–ª–∞–π–Ω / Offline):</strong> –ù–∞–∂–º–∏—Ç–µ "üìÅ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏" ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã</p>
                <p><strong>Method 1 (Offline):</strong> Click "üìÅ Add Tracks" ‚Üí Select files</p>
                <p><strong>–°–ø–æ—Å–æ–± 2 (–û—Ñ–ª–∞–π–Ω / Offline):</strong> –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ MP3/MP4 —Ñ–∞–π–ª—ã –≤ –æ–∫–Ω–æ</p>
                <p><strong>Method 2 (Offline):</strong> Drag & drop MP3/MP4 files into window</p>
                <p style="margin-top: 10px;"><strong>‚ö†Ô∏è –°–ø–æ—Å–æ–± 3 (–¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç):</strong> –ù–∞–∂–º–∏—Ç–µ "üîó YouTube" ‚Üí –í—Å—Ç–∞–≤—å—Ç–µ URL</p>
                <p><strong>‚ö†Ô∏è Method 3 (Requires Internet):</strong> Click "üîó YouTube" ‚Üí Paste URL</p>
            </div>

            <div class="help-section">
                <h3>‚ñ∂Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ / Controls</h3>
                <p>‚èÆÔ∏è –ü—Ä–µ–¥—ã–¥—É—â–∞—è / Previous | ‚ñ∂Ô∏è –ò–≥—Ä–∞—Ç—å / Play | ‚è∏Ô∏è –ü–∞—É–∑–∞ / Pause | ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∞—è / Next</p>
                <p>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å / Volume | –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä / Progress bar –¥–ª—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏ / for seeking</p>
            </div>

            <div class="help-section">
                <h3>üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ / Storage</h3>
                <p>üì± <strong>–¢–µ–ª–µ—Ñ–æ–Ω / Phone:</strong> –¥–æ / up to 10 GB</p>
                <p>üíª <strong>–ö–æ–º–ø—å—é—Ç–µ—Ä / Desktop:</strong> –¥–æ / up to 500 GB!</p>
                <p>‚úÖ –ú—É–∑—ã–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è <strong>–ª–æ–∫–∞–ª—å–Ω–æ</strong> / Music stored <strong>locally</strong></p>
                <p>‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç <strong>–æ—Ñ–ª–∞–π–Ω</strong> / Works <strong>offline</strong></p>
            </div>

            <div class="help-section">
                <h3>üì∂ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º / Offline Mode</h3>
                <p><strong style="color: #4ecca3;">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω / Works Offline:</strong></p>
                <p>‚Ä¢ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ / Music playback</p>
                <p>‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ / Adding files from device</p>
                <p>‚Ä¢ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ / Drag & drop files</p>
                <p>‚Ä¢ –ü–æ–∏—Å–∫ –ø–æ —Ç—Ä–µ–∫–∞—Ö / Search tracks</p>
                <p>‚Ä¢ –í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ / Video/audio format selection</p>
                <p style="margin-top: 10px;"><strong style="color: #f5576c;">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç / Requires Internet:</strong></p>
                <p>‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ —Å YouTube / YouTube downloads</p>
                <p>‚Ä¢ –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–¥–∏–Ω —Ä–∞–∑) / First app install (once)</p>
            </div>

            <div class="help-section">
                <h3>üéº –§–æ—Ä–º–∞—Ç—ã / Formats</h3>
                <p>‚úÖ MP3, WAV, OGG, FLAC, M4A, AAC</p>
                <p>‚úÖ MP4, M4V (–≤–∏–¥–µ–æ - —Ç–æ–ª—å–∫–æ –∑–≤—É–∫ / video - audio only)</p>
            </div>

            <div class="help-section">
                <h3>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ / Install as App</h3>
                <p><strong>iPhone:</strong> Safari ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí –ù–∞ —ç–∫—Ä–∞–Ω "–î–æ–º–æ–π"</p>
                <p><strong>iPhone:</strong> Safari ‚Üí Share ‚Üí Add to Home Screen</p>
                <p><strong>Android:</strong> Chrome ‚Üí –ú–µ–Ω—é (‚ãÆ) ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
                <p><strong>Android:</strong> Chrome ‚Üí Menu (‚ãÆ) ‚Üí Install app</p>
                <p><strong>Desktop:</strong> Chrome/Edge ‚Üí –ó–Ω–∞—á–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (‚äï)</p>
                <p><strong>Desktop:</strong> Chrome/Edge ‚Üí Install icon (‚äï)</p>
            </div>

            <div class="help-section">
                <h3>üìö –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Full Guide</h3>
                <p>üá∑üá∫ <a href="https://github.com/RAZEX0LOL/music-player-pwa/blob/master/INSTRUKCIYA.md" target="_blank">–†—É—Å—Å–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a></p>
                <p>üá¨üáß <a href="https://github.com/RAZEX0LOL/music-player-pwa/blob/master/USER-GUIDE.md" target="_blank">English User Guide</a></p>
            </div>

            <div class="help-section" style="text-align: center; padding-top: 10px;">
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9em;">
                    üîí 100% –ø—Ä–∏–≤–∞—Ç–Ω–æ / 100% private<br>
                    –ù–µ—Ç —Å–ª–µ–∂–∫–∏ / No tracking | –ù–µ—Ç —Ä–µ–∫–ª–∞–º—ã / No ads
                </p>
            </div>
        </div>
    </div>

    <!-- Format Selection Modal -->
    <div id="formatModal" class="modal">
        <div class="modal-content format-modal">
            <span class="close" id="formatModalClose">&times;</span>
            <h2>üéµ –í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ / Format Selection</h2>

            <div class="format-options">
                <button class="format-option-btn" id="keepVideoBtn">
                    <div class="format-icon">üé¨</div>
                    <h3>–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –≤–∏–¥–µ–æ</h3>
                    <p>Keep as Video</p>
                    <span class="format-desc">–ü–æ–ª–Ω—ã–π –≤–∏–¥–µ–æ—Ñ–∞–π–ª —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º</span>
                    <span class="format-desc">Full video file with visuals</span>
                </button>

                <button class="format-option-btn" id="audioOnlyBtn">
                    <div class="format-icon">üéµ</div>
                    <h3>–¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ</h3>
                    <p>Audio Only</p>
                    <span class="format-desc">–ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä, —Ç–æ–ª—å–∫–æ –∑–≤—É–∫</span>
                    <span class="format-desc">Smaller size, audio only</span>
                </button>
            </div>

            <p class="format-note">
                üí° –í–∏–¥–µ–æ: –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –∫–ª–∏–ø—ã<br>
                üí° Video: watch music videos<br>
                üéß –ê—É–¥–∏–æ: —ç–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ (~80% –º–µ–Ω—å—à–µ)<br>
                üéß Audio: save space (~80% smaller)
            </p>
        </div>
    </div>

    <!-- YouTube Download Modal -->
    <div id="youtubeModal" class="modal">
        <div class="modal-content youtube-modal">
            <span class="close" id="youtubeModalClose">&times;</span>
            <h2>üîó –°–∫–∞—á–∞—Ç—å —Å YouTube / Download from YouTube</h2>

            <div class="online-required-banner">
                <span class="online-icon">üì∂</span>
                <div>
                    <strong>–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</strong><br>
                    <strong>Internet connection required</strong>
                </div>
            </div>

            <div class="youtube-input-section">
                <input type="text" id="youtubeUrl" class="youtube-input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É YouTube / Paste YouTube URL">
                <p class="hint-text">–ü—Ä–∏–º–µ—Ä / Example: https://www.youtube.com/watch?v=...</p>
            </div>

            <div class="youtube-format-options">
                <h3>–§–æ—Ä–º–∞—Ç / Format:</h3>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="ytFormat" value="video" checked>
                        <span>üé¨ –í–∏–¥–µ–æ (MP4)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="ytFormat" value="audio">
                        <span>üéµ –¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ (MP3)</span>
                    </label>
                </div>
            </div>

            <button id="downloadYoutubeBtn" class="btn-primary youtube-download-btn">
                üöÄ –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –∑–∞–≥—Ä—É–∑–∫–∏ / Open Download Site
            </button>

            <div class="youtube-info-box">
                <p style="font-size: 0.9em; line-height: 1.6;">
                    <strong>üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç / How it works:</strong><br>
                    1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Å–∞–π—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏<br>
                    1. A trusted download website will open<br><br>
                    2. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª —Ç–∞–º –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –ø–ª–µ–µ—Ä<br>
                    2. Download the file there and add to player<br><br>
                    <em>–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±—ç–∫–µ–Ω–¥–∞!</em><br>
                    <em>Safe and no backend required!</em>
                </p>
            </div>

            <p class="youtube-warning">
                ‚ö†Ô∏è <strong>–í–∞–∂–Ω–æ / Important:</strong><br>
                ‚Ä¢ –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç / Requires internet<br>
                ‚Ä¢ –¢–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –≤–∏–¥–µ–æ / Public videos only<br>
                ‚Ä¢ –°–æ–±–ª—é–¥–∞–π—Ç–µ –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ / Respect copyright laws<br>
                ‚Ä¢ –°—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–µ—Ä–≤–∏—Å, –Ω–µ –Ω–∞—à / Third-party service, not ours
            </p>
        </div>
    </div>

    <script src="./app.js"></script>
</body>
</html>
